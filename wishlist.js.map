{"version":3,"file":"wishlist.js","sources":["../src/wishlist.js"],"sourcesContent":["//Логіка сторінки Wishlist\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { refs } from './js/refs';\nimport { getProductsById } from './js/products-api';\nimport { showProducts, showModalProduct } from './js/render-function';\nimport { openModal } from './js/modal';\nimport { updateNavCounts } from './js/helpers';\nimport {\n  getWishlist,\n  isInCart,\n  isInWishlist,\n  toggleCart,\n  toggleWishlist,\n} from './js/storage';\n\nlet currentProductId = null;\n\nupdateNavCounts(refs);\n\ninitWishlist();\n\nfunction initWishlist() {\n  const ids = getWishlist();\n\n  if (!ids.length) {\n    refs.products.innerHTML = '';\n    if (refs.notFound) refs.notFound.classList.add('not-found--visible');\n    return;\n  }\n\n  if (refs.notFound) refs.notFound.classList.remove('not-found--visible');\n\n  Promise.all(ids.map(id => getProductsById(id)))\n    .then(products => {\n      refs.products.innerHTML = showProducts(products);\n    })\n    .catch(() => {\n      iziToast.error({ message: 'Please try again later.' });\n    });\n}\n\nrefs.products.addEventListener('click', event => {\n  const item = event.target.closest('.products__item');\n  if (!item) return;\n\n  const id = item.dataset.id;\n  currentProductId = id;\n\n  getProductsById(id)\n    .then(product => {\n      refs.modalProduct.innerHTML = showModalProduct(product);\n      syncModalButtons(id);\n      openModal();\n    })\n    .catch(() => {\n      iziToast.error({ message: 'Please try again later.' });\n    });\n});\n\nfunction syncModalButtons(id) {\n  refs.modalBtnWishlist.textContent = isInWishlist(id)\n    ? 'Remove from Wishlist'\n    : 'Add to Wishlist';\n\n  refs.modalBtnCart.textContent = isInCart(id)\n    ? 'Remove from Cart'\n    : 'Add to Cart';\n}\n\nrefs.modalBtnWishlist.addEventListener('click', () => {\n  if (!currentProductId) return;\n\n  toggleWishlist(currentProductId);\n  syncModalButtons(currentProductId);\n  updateNavCounts(refs);\n  initWishlist();\n});\n\nrefs.modalBtnCart.addEventListener('click', () => {\n  if (!currentProductId) return;\n\n  toggleCart(currentProductId);\n  syncModalButtons(currentProductId);\n  updateNavCounts(refs);\n});\n"],"names":["currentProductId","updateNavCounts","initWishlist","ids","getWishlist","refs","id","getProductsById","products","showProducts","iziToast","event","item","product","showModalProduct","syncModalButtons","openModal","isInWishlist","isInCart","toggleWishlist","toggleCart"],"mappings":"uKAiBA,IAAIA,EAAmB,KAEvBC,EAAoB,EAEpBC,IAEA,SAASA,GAAe,CACtB,MAAMC,EAAMC,IAEZ,GAAI,CAACD,EAAI,OAAQ,CACfE,EAAK,SAAS,UAAY,GACtBA,EAAK,UAAUA,EAAK,SAAS,UAAU,IAAI,oBAAoB,EACnE,MACD,CAEGA,EAAK,UAAUA,EAAK,SAAS,UAAU,OAAO,oBAAoB,EAEtE,QAAQ,IAAIF,EAAI,IAAIG,GAAMC,EAAgBD,CAAE,CAAC,CAAC,EAC3C,KAAKE,GAAY,CAChBH,EAAK,SAAS,UAAYI,EAAaD,CAAQ,CACrD,CAAK,EACA,MAAM,IAAM,CACXE,EAAS,MAAM,CAAE,QAAS,yBAA2B,CAAA,CAC3D,CAAK,CACL,CAEAL,EAAK,SAAS,iBAAiB,QAASM,GAAS,CAC/C,MAAMC,EAAOD,EAAM,OAAO,QAAQ,iBAAiB,EACnD,GAAI,CAACC,EAAM,OAEX,MAAMN,EAAKM,EAAK,QAAQ,GACxBZ,EAAmBM,EAEnBC,EAAgBD,CAAE,EACf,KAAKO,GAAW,CACfR,EAAK,aAAa,UAAYS,EAAiBD,CAAO,EACtDE,EAAiBT,CAAE,EACnBU,GACN,CAAK,EACA,MAAM,IAAM,CACXN,EAAS,MAAM,CAAE,QAAS,yBAA2B,CAAA,CAC3D,CAAK,CACL,CAAC,EAED,SAASK,EAAiBT,EAAI,CAC5BD,EAAK,iBAAiB,YAAcY,EAAaX,CAAE,EAC/C,uBACA,kBAEJD,EAAK,aAAa,YAAca,EAASZ,CAAE,EACvC,mBACA,aACN,CAEAD,EAAK,iBAAiB,iBAAiB,QAAS,IAAM,CAC/CL,IAELmB,EAAenB,CAAgB,EAC/Be,EAAiBf,CAAgB,EACjCC,EAAoB,EACpBC,IACF,CAAC,EAEDG,EAAK,aAAa,iBAAiB,QAAS,IAAM,CAC3CL,IAELoB,EAAWpB,CAAgB,EAC3Be,EAAiBf,CAAgB,EACjCC,EAAoB,EACtB,CAAC"}